<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Csvec (sprs.Sprs.Csvec)</title><meta charset="utf-8"/><link rel="stylesheet" href="../../../odoc.support/odoc.css"/><meta name="generator" content="odoc 3.0.0"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../odoc.support/highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body class="odoc"><nav class="odoc-nav"><a href="../index.html">Up</a> â€“ <a href="../../../index.html">Index</a> &#x00BB; <a href="../../index.html">sprs</a> &#x00BB; <a href="../index.html">Sprs</a> &#x00BB; Csvec</nav><header class="odoc-preamble"><h1>Module <code><span>Sprs.Csvec</span></code></h1></header><div class="odoc-tocs"><nav class="odoc-toc odoc-local-toc"><ul><li><a href="#creation-functions-for-csvec">Creation functions for CsVec</a></li><li><a href="#indexing-and-iteration-functions">Indexing and Iteration Functions</a></li><li><a href="#building-vectors">Building vectors</a></li><li><a href="#miscellaneous">Miscellaneous</a></li><li><a href="#conversions">Conversions</a></li><li><a href="#normalization">Normalization</a></li></ul></nav></div><div class="odoc-content"><div class="odoc-spec"><div class="spec exception anchored" id="exception-VectorException"><a href="#exception-VectorException" class="anchor"></a><code><span><span class="keyword">exception</span> </span><span><span class="exception">VectorException</span> <span class="keyword">of</span> string</span></code></div></div><h2 id="creation-functions-for-csvec"><a href="#creation-functions-for-csvec" class="anchor"></a>Creation functions for CsVec</h2><div class="odoc-spec"><div class="spec value anchored" id="val-new_trusted"><a href="#val-new_trusted" class="anchor"></a><code><span><span class="keyword">val</span> new_trusted : <span>int <span class="arrow">&#45;&gt;</span></span> <span><span>int array</span> <span class="arrow">&#45;&gt;</span></span> <span><span><span class="type-var">'a</span> array</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <a href="../Sparse/Cs_vec_base/index.html#type-t">Sparse.Cs_vec_base.t</a></span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-new_checked"><a href="#val-new_checked" class="anchor"></a><code><span><span class="keyword">val</span> new_checked : 
  <span>int <span class="arrow">&#45;&gt;</span></span>
  <span><span>int <span class="xref-unresolved">Stdlib</span>.Dynarray.t</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span class="type-var">'a</span> <a href="../Sparse/Dynarray/index.html#type-t">Sparse.Dynarray.t</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span>(<span><span class="type-var">'a</span> <a href="../Sparse/Cs_vec_base/index.html#type-t">Sparse.Cs_vec_base.t</a></span>, string)</span> <span class="xref-unresolved">Stdlib</span>.result</span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-try_new_csvec"><a href="#val-try_new_csvec" class="anchor"></a><code><span><span class="keyword">val</span> try_new_csvec : 
  <span>int <span class="arrow">&#45;&gt;</span></span>
  <span><span>int array</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span class="type-var">'a</span> array</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span>(<span><span class="type-var">'a</span> <a href="../Sparse/Cs_vec_base/index.html#type-t">Sparse.Cs_vec_base.t</a></span>, string)</span> <span class="xref-unresolved">Stdlib</span>.result</span></span></code></div><div class="spec-doc"><p>Create a sparse vector.</p><p>Returns an error:</p><ul><li>If <code>indices</code> and <code>data</code> lengths differ</li><li>If the indices are out of order</li><li>If the data is longer than <code>n</code></li></ul></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-new_csvec"><a href="#val-new_csvec" class="anchor"></a><code><span><span class="keyword">val</span> new_csvec : <span>int <span class="arrow">&#45;&gt;</span></span> <span><span>int array</span> <span class="arrow">&#45;&gt;</span></span> <span><span><span class="type-var">'a</span> array</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <a href="../Sparse/Cs_vec_base/index.html#type-t">Sparse.Cs_vec_base.t</a></span></span></code></div><div class="spec-doc"><p>Same as <a href="#val-try_new_csvec"><code>try_new_csvec</code></a>, but raises an error if invalid</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-new_from_unsorted"><a href="#val-new_from_unsorted" class="anchor"></a><code><span><span class="keyword">val</span> new_from_unsorted : 
  <span>int <span class="arrow">&#45;&gt;</span></span>
  <span><span>int array</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span class="type-var">'a</span> array</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span>(<span><span class="type-var">'a</span> <a href="../Sparse/Cs_vec_base/index.html#type-t">Sparse.Cs_vec_base.t</a></span>, string)</span> <span class="xref-unresolved">Stdlib</span>.result</span></span></code></div><div class="spec-doc"><p>Creates a CsVec, sorting indices and data if necessary.</p><p>Returns an error if the lengths mismatch.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-empty"><a href="#val-empty" class="anchor"></a><code><span><span class="keyword">val</span> empty : <span>int <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <a href="../Sparse/Cs_vec_base/index.html#type-t">Sparse.Cs_vec_base.t</a></span></span></code></div><div class="spec-doc"><p>Create an empty <code>CsVec</code> of size <code>n</code> for building purposes</p></div></div><h2 id="indexing-and-iteration-functions"><a href="#indexing-and-iteration-functions" class="anchor"></a>Indexing and Iteration Functions</h2><div class="odoc-spec"><div class="spec value anchored" id="val-nnz"><a href="#val-nnz" class="anchor"></a><code><span><span class="keyword">val</span> nnz : <span><span><span class="type-var">'a</span> <a href="../Sparse/Cs_vec_base/index.html#type-t">Sparse.Cs_vec_base.t</a></span> <span class="arrow">&#45;&gt;</span></span> int</span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-nnz_index"><a href="#val-nnz_index" class="anchor"></a><code><span><span class="keyword">val</span> nnz_index : <span><span><span class="type-var">'a</span> <a href="../Sparse/Cs_vec_base/index.html#type-t">Sparse.Cs_vec_base.t</a></span> <span class="arrow">&#45;&gt;</span></span> <span>int <span class="arrow">&#45;&gt;</span></span> <span><a href="../Sparse/Nnz_index/index.html#type-t">Sparse.Nnz_index.t</a> option</span></span></code></div><div class="spec-doc"><p>Try to index a vector at a specific index. Returns <code>Some nnz</code> if index exists.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-get_nnz"><a href="#val-get_nnz" class="anchor"></a><code><span><span class="keyword">val</span> get_nnz : <span><span><span class="type-var">'a</span> <a href="../Sparse/Cs_vec_base/index.html#type-t">Sparse.Cs_vec_base.t</a></span> <span class="arrow">&#45;&gt;</span></span> <span><a href="../Sparse/Nnz_index/index.html#type-t">Sparse.Nnz_index.t</a> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'a</span></span></code></div><div class="spec-doc"><p>Access element at given <code>NNZ</code> index, with constant complexity.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-set_nnz"><a href="#val-set_nnz" class="anchor"></a><code><span><span class="keyword">val</span> set_nnz : <span><span><span class="type-var">'a</span> <a href="../Sparse/Cs_vec_base/index.html#type-t">Sparse.Cs_vec_base.t</a></span> <span class="arrow">&#45;&gt;</span></span> <span><a href="../Sparse/Nnz_index/index.html#type-t">Sparse.Nnz_index.t</a> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p>Set element at given <code>NNZ</code> index, with constant complexity.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-get"><a href="#val-get" class="anchor"></a><code><span><span class="keyword">val</span> get : <span><span><span class="type-var">'a</span> <a href="../Sparse/Cs_vec_base/index.html#type-t">Sparse.Cs_vec_base.t</a></span> <span class="arrow">&#45;&gt;</span></span> <span>int <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> option</span></span></code></div><div class="spec-doc"><p>Access element at given index, with logarithmic complexity.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-set"><a href="#val-set" class="anchor"></a><code><span><span class="keyword">val</span> set : <span><span><span class="type-var">'a</span> <a href="../Sparse/Cs_vec_base/index.html#type-t">Sparse.Cs_vec_base.t</a></span> <span class="arrow">&#45;&gt;</span></span> <span>int <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> <span>unit option</span></span></code></div><div class="spec-doc"><p>Set element at given index, with logarithmic complexity. Returns <code>None</code> if the index does not exist already as a non-zero..</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-fold"><a href="#val-fold" class="anchor"></a><code><span><span class="keyword">val</span> fold : 
  <span><span>(<span><span class="type-var">'acc</span> <span class="arrow">&#45;&gt;</span></span> <span>int <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'acc</span>)</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="type-var">'acc</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span class="type-var">'a</span> <a href="../Sparse/Cs_vec_base/index.html#type-t">Sparse.Cs_vec_base.t</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span class="type-var">'acc</span></span></code></div><div class="spec-doc"><p><code>fold f acc v</code> calls <code>f acc index data</code>, through each index-data pair in <code>v</code></p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-iter"><a href="#val-iter" class="anchor"></a><code><span><span class="keyword">val</span> iter : <span><span>(<span>int <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> unit)</span> <span class="arrow">&#45;&gt;</span></span> <span><span><span class="type-var">'a</span> <a href="../Sparse/Cs_vec_base/index.html#type-t">Sparse.Cs_vec_base.t</a></span> <span class="arrow">&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p><code>iter f v</code> calls <code>f index data</code> on each index-data pair in <code>v</code></p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-map"><a href="#val-map" class="anchor"></a><code><span><span class="keyword">val</span> map : <span><span>(<span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'b</span>)</span> <span class="arrow">&#45;&gt;</span></span> <span><span><span class="type-var">'a</span> <a href="../Sparse/Cs_vec_base/index.html#type-t">Sparse.Cs_vec_base.t</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'b</span> <a href="../Sparse/Cs_vec_base/index.html#type-t">Sparse.Cs_vec_base.t</a></span></span></code></div><div class="spec-doc"><p><code>map f v</code> returns a new vector with data mapped by <code>f</code></p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-map_inplace"><a href="#val-map_inplace" class="anchor"></a><code><span><span class="keyword">val</span> map_inplace : <span><span>(<span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'a</span>)</span> <span class="arrow">&#45;&gt;</span></span> <span><span><span class="type-var">'a</span> <a href="../Sparse/Cs_vec_base/index.html#type-t">Sparse.Cs_vec_base.t</a></span> <span class="arrow">&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p><code>map_inplace f v</code> maps <code>f</code> onto <code>v.data</code> in place.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-count"><a href="#val-count" class="anchor"></a><code><span><span class="keyword">val</span> count : <span><span>(<span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> bool)</span> <span class="arrow">&#45;&gt;</span></span> <span><span><span class="type-var">'a</span> <a href="../Sparse/Cs_vec_base/index.html#type-t">Sparse.Cs_vec_base.t</a></span> <span class="arrow">&#45;&gt;</span></span> int</span></code></div><div class="spec-doc"><p>Count how many elements make <code>f</code> return true</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-is_empty"><a href="#val-is_empty" class="anchor"></a><code><span><span class="keyword">val</span> is_empty : <span><span><span class="type-var">'a</span> <a href="../Sparse/Cs_vec_base/index.html#type-t">Sparse.Cs_vec_base.t</a></span> <span class="arrow">&#45;&gt;</span></span> bool</span></code></div><div class="spec-doc"><p>Returns whether a vector is empty.</p></div></div><h2 id="building-vectors"><a href="#building-vectors" class="anchor"></a>Building vectors</h2><div class="odoc-spec"><div class="spec value anchored" id="val-append"><a href="#val-append" class="anchor"></a><code><span><span class="keyword">val</span> append : <span><span><span class="type-var">'a</span> <a href="../Sparse/Cs_vec_base/index.html#type-t">Sparse.Cs_vec_base.t</a></span> <span class="arrow">&#45;&gt;</span></span> <span>int <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p>Append an element to the sparse vector. The append should preserve the structure.</p><p>Raises an exception if:</p><ul><li><code>ind</code> is lower or equal to the last element of v.indices</li><li><code>ind</code> is greater than v.dim</li></ul></div></div><h2 id="miscellaneous"><a href="#miscellaneous" class="anchor"></a>Miscellaneous</h2><div class="odoc-spec"><div class="spec value anchored" id="val-check_structure"><a href="#val-check_structure" class="anchor"></a><code><span><span class="keyword">val</span> check_structure : <span><span><span class="type-var">'a</span> <a href="../Sparse/Cs_vec_base/index.html#type-t">Sparse.Cs_vec_base.t</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span>(unit, string)</span> <span class="xref-unresolved">Stdlib</span>.result</span></span></code></div><div class="spec-doc"><p>Check the sparse structure, namely that:</p><ul><li><code>indices</code> are sorted</li><li>all <code>indices</code> are less than <code>dim</code></li></ul></div></div><h2 id="conversions"><a href="#conversions" class="anchor"></a>Conversions</h2><div class="odoc-spec"><div class="spec value anchored" id="val-to_col"><a href="#val-to_col" class="anchor"></a><code><span><span class="keyword">val</span> to_col : <span><span><span class="type-var">'a</span> <a href="../Sparse/Cs_vec_base/index.html#type-t">Sparse.Cs_vec_base.t</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <a href="../Sparse/Cs_mat_base/index.html#type-t">Sparse.Cs_mat_base.t</a></span></span></code></div><div class="spec-doc"><p>Convert this vector into a new matrix with only one column.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-to_row"><a href="#val-to_row" class="anchor"></a><code><span><span class="keyword">val</span> to_row : <span><span><span class="type-var">'a</span> <a href="../Sparse/Cs_vec_base/index.html#type-t">Sparse.Cs_vec_base.t</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <a href="../Sparse/Cs_mat_base/index.html#type-t">Sparse.Cs_mat_base.t</a></span></span></code></div><div class="spec-doc"><p>Convert this vector into a new matrix with only one row.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-to_dense"><a href="#val-to_dense" class="anchor"></a><code><span><span class="keyword">val</span> to_dense : <span><span>float <a href="../Sparse/Cs_vec_base/index.html#type-t">Sparse.Cs_vec_base.t</a></span> <span class="arrow">&#45;&gt;</span></span> <span>float array</span></span></code></div><div class="spec-doc"><p>Convert this vector into a dense array.</p><p>The rest of the vector is filled with zeroes.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-to_hashtbl"><a href="#val-to_hashtbl" class="anchor"></a><code><span><span class="keyword">val</span> to_hashtbl : <span><span><span class="type-var">'a</span> <a href="../Sparse/Cs_vec_base/index.html#type-t">Sparse.Cs_vec_base.t</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span>(int, <span class="type-var">'a</span>)</span> <span class="xref-unresolved">Stdlib</span>.Hashtbl.t</span></span></code></div><div class="spec-doc"><p>Convert this vector into a index -&gt; value hashtbl</p></div></div><h2 id="normalization"><a href="#normalization" class="anchor"></a>Normalization</h2><div class="odoc-spec"><div class="spec value anchored" id="val-l1_norm"><a href="#val-l1_norm" class="anchor"></a><code><span><span class="keyword">val</span> l1_norm : <span><span>float <a href="../Sparse/Cs_vec_base/index.html#type-t">Sparse.Cs_vec_base.t</a></span> <span class="arrow">&#45;&gt;</span></span> float</span></code></div><div class="spec-doc"><p>Compute the L1-norm of <code>v</code></p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-squared_l2_norm"><a href="#val-squared_l2_norm" class="anchor"></a><code><span><span class="keyword">val</span> squared_l2_norm : <span><span>float <a href="../Sparse/Cs_vec_base/index.html#type-t">Sparse.Cs_vec_base.t</a></span> <span class="arrow">&#45;&gt;</span></span> float</span></code></div><div class="spec-doc"><p>Compute the squared L2-norm of <code>v</code></p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-l2_norm"><a href="#val-l2_norm" class="anchor"></a><code><span><span class="keyword">val</span> l2_norm : <span><span>float <a href="../Sparse/Cs_vec_base/index.html#type-t">Sparse.Cs_vec_base.t</a></span> <span class="arrow">&#45;&gt;</span></span> float</span></code></div><div class="spec-doc"><p>Compute the L2-norm of <code>v</code></p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-norm"><a href="#val-norm" class="anchor"></a><code><span><span class="keyword">val</span> norm : <span><span>float <a href="../Sparse/Cs_vec_base/index.html#type-t">Sparse.Cs_vec_base.t</a></span> <span class="arrow">&#45;&gt;</span></span> <span>float <span class="arrow">&#45;&gt;</span></span> float</span></code></div><div class="spec-doc"><p>Compute the p-order norm of <code>v</code></p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-normalize"><a href="#val-normalize" class="anchor"></a><code><span><span class="keyword">val</span> normalize : <span><span>float <a href="../Sparse/Cs_vec_base/index.html#type-t">Sparse.Cs_vec_base.t</a></span> <span class="arrow">&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p>Divides the vector by its own L2-norm in-place. The zero vector is left unchanged</p></div></div></div></body></html>
