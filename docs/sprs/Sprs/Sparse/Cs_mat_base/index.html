<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Cs_mat_base (sprs.Sprs.Sparse.Cs_mat_base)</title><meta charset="utf-8"/><link rel="stylesheet" href="../../../../odoc.support/odoc.css"/><meta name="generator" content="odoc 3.0.0"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../../odoc.support/highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body class="odoc"><nav class="odoc-nav"><a href="../index.html">Up</a> â€“ <a href="../../../../index.html">Index</a> &#x00BB; <a href="../../../index.html">sprs</a> &#x00BB; <a href="../../index.html">Sprs</a> &#x00BB; <a href="../index.html">Sparse</a> &#x00BB; Cs_mat_base</nav><header class="odoc-preamble"><h1>Module <code><span>Sparse.Cs_mat_base</span></code></h1><p>Compressed matrix in the CSR or CSC format, with sorted indices.</p><p>This sparse matrix format is the preferred format for performing arithmetic operations. Constructing a sparse matrix directly in this format requires knowledge of its internals. For easier matrix construction, use the triplet format.</p><p>The `cs_mat_base` type is parameterized by the scalar type `'a` of its data.</p><p>Unlike the rust library, all underlying data structures are arrays in this implementation.</p><p>## Storage format</p><p>In the compressed storage format, the non-zero values of a sparse matrix are stored as the row and column location of the non-zero values, with a compression along the rows (CSR) or columns (CSC) indices. The dimension along which the storage is compressed is referred to as the *outer dimension*, the other dimension is called the *inner dimension*. For clarity, the remaining explanation will assume a CSR matrix, but the information stands for CSC matrices as well.</p><p>### Indptr</p><p>An index pointer array `indptr` of size corresponding to the number of rows stores the cumulative sum of non-zero elements for each row. For instance, the number of non-zero elements of the i-th row can be obtained by computing `indptr<code>i + 1</code> - indptr<code>i</code>`. The total number of non-zero elements is thus `nnz = indptr<code>nrows</code>`. This index pointer array can then be used to efficiently index the `indices` and `data` array, which respectively contain the column indices and the values of the non-zero elements.</p><p>### Indices and data</p><p>The non-zero locations and values are stored in arrays of size `nnz`, `indices` and `data`. For row `i`, the non-zeros are located in the slices `indices<code>indptr[i]..indptr[i+1]</code>` and `data<code>indptr[i]..indptr[i+1]</code>`. We require and enforce sorted indices for each row.</p><p>## Construction</p><p>A sparse matrix can be directly constructed by providing its index pointer, indices and data arrays. The coherence of the provided structure is then verified.</p><p>For situations where the compressed structure is hard to figure out up front, the <code>triplet format</code>(struct.TriMatBase.html) can be used. A matrix in the triplet format can then be efficiently converted to a `CsMat`.</p></header><div class="odoc-content"><div class="odoc-spec"><div class="spec type anchored" id="type-t"><a href="#type-t" class="anchor"></a><code><span><span class="keyword">type</span> <span>'a t</span></span><span> = </span><span>{</span></code><ol><li id="type-t.storage" class="def record field anchored"><a href="#type-t.storage" class="anchor"></a><code><span><span class="keyword">mutable</span> storage : <a href="../index.html#type-compressed_storage">compressed_storage</a>;</span></code></li><li id="type-t.nrows" class="def record field anchored"><a href="#type-t.nrows" class="anchor"></a><code><span><span class="keyword">mutable</span> nrows : int;</span></code></li><li id="type-t.ncols" class="def record field anchored"><a href="#type-t.ncols" class="anchor"></a><code><span><span class="keyword">mutable</span> ncols : int;</span></code></li><li id="type-t.indptr" class="def record field anchored"><a href="#type-t.indptr" class="anchor"></a><code><span>indptr : <span>int <a href="../Dynarray/index.html#type-t">Dynarray.t</a></span>;</span></code></li><li id="type-t.indices" class="def record field anchored"><a href="#type-t.indices" class="anchor"></a><code><span>indices : <span>int <a href="../Dynarray/index.html#type-t">Dynarray.t</a></span>;</span></code></li><li id="type-t.data" class="def record field anchored"><a href="#type-t.data" class="anchor"></a><code><span>data : <span><span class="type-var">'a</span> <a href="../Dynarray/index.html#type-t">Dynarray.t</a></span>;</span></code></li></ol><code><span>}</span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-pp"><a href="#val-pp" class="anchor"></a><code><span><span class="keyword">val</span> pp : 
  'a. <span><span>(<span><span class="xref-unresolved">Ppx_deriving_runtime</span>.Format.formatter <span class="arrow">&#45;&gt;</span></span>
        <span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span>
        <span class="xref-unresolved">Ppx_deriving_runtime</span>.unit)</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="xref-unresolved">Ppx_deriving_runtime</span>.Format.formatter <span class="arrow">&#45;&gt;</span></span>
  <span><span><span class="type-var">'a</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span class="xref-unresolved">Ppx_deriving_runtime</span>.unit</span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-show"><a href="#val-show" class="anchor"></a><code><span><span class="keyword">val</span> show : 
  'a. <span><span>(<span><span class="xref-unresolved">Ppx_deriving_runtime</span>.Format.formatter <span class="arrow">&#45;&gt;</span></span>
        <span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span>
        <span class="xref-unresolved">Ppx_deriving_runtime</span>.unit)</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span class="type-var">'a</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span class="xref-unresolved">Ppx_deriving_runtime</span>.string</span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-equal"><a href="#val-equal" class="anchor"></a><code><span><span class="keyword">val</span> equal : 
  'a. <span><span>(<span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> <span class="xref-unresolved">Ppx_deriving_runtime</span>.bool)</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span class="type-var">'a</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span class="type-var">'a</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span class="xref-unresolved">Ppx_deriving_runtime</span>.bool</span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-get_storage"><a href="#val-get_storage" class="anchor"></a><code><span><span class="keyword">val</span> get_storage : <span><span><span class="type-var">'a</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> <a href="../index.html#type-compressed_storage">compressed_storage</a></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-get_nrows"><a href="#val-get_nrows" class="anchor"></a><code><span><span class="keyword">val</span> get_nrows : <span><span><span class="type-var">'a</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> int</span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-get_ncols"><a href="#val-get_ncols" class="anchor"></a><code><span><span class="keyword">val</span> get_ncols : <span><span><span class="type-var">'a</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> int</span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-get_indptr"><a href="#val-get_indptr" class="anchor"></a><code><span><span class="keyword">val</span> get_indptr : <span><span><span class="type-var">'a</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> <span>int <a href="../Dynarray/index.html#type-t">Dynarray.t</a></span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-get_indices"><a href="#val-get_indices" class="anchor"></a><code><span><span class="keyword">val</span> get_indices : <span><span><span class="type-var">'a</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> <span>int <a href="../Dynarray/index.html#type-t">Dynarray.t</a></span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-get_data"><a href="#val-get_data" class="anchor"></a><code><span><span class="keyword">val</span> get_data : <span><span><span class="type-var">'a</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <a href="../Dynarray/index.html#type-t">Dynarray.t</a></span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-copy"><a href="#val-copy" class="anchor"></a><code><span><span class="keyword">val</span> copy : <span><span><span class="type-var">'a</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <a href="#type-t">t</a></span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-print_float_matrix"><a href="#val-print_float_matrix" class="anchor"></a><code><span><span class="keyword">val</span> print_float_matrix : <span><span>float <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> unit</span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-print_int_matrix"><a href="#val-print_int_matrix" class="anchor"></a><code><span><span class="keyword">val</span> print_int_matrix : <span><span>int <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> unit</span></code></div></div></div></body></html>
